# validate-article-json

[api-raml json-schema](https://github.com/elifesciences/api-raml) validation for the article-json generated by the [bot-lax-adaptor](https://github.com/elifesciences/bot-lax-adaptor) using Go.

## Build

    ./manage.sh build

## Usage

    $ go run main.go -h
    Usage of /tmp/go-build3363302255/b001/exe/main:
      -article-json string
            the path to a article-json file or directory
      -buffer-size int
            the maximum number of article-json files to keep in memory at once (default 2000)
      -num-workers int
            the number of workers to process the article-json files (default 12)
      -sample-size int
            the number of article-json files to parse (default -1)
      -schema-root string
            the path to api-raml schema root

For example:

```bash
$ time go run main.go --schema-root /path/to/api-raml/ --article-json /path/to/article-json/files/ --sample-size 10
VOR valid in	 182ms: article-json/elife-00031-v1.xml.json
VOR valid in	 424ms: article-json/elife-00048-v1.xml.json
VOR valid in	 382ms: article-json/elife-00003-v1.xml.json
VOR valid in	 421ms: article-json/elife-00005-v1.xml.json
VOR valid in	 464ms: article-json/elife-00012-v1.xml.json
VOR valid in	 472ms: article-json/elife-00007-v1.xml.json
VOR valid in	 483ms: article-json/elife-00011-v1.xml.json
VOR valid in	 524ms: article-json/elife-00047-v1.xml.json
VOR valid in	 587ms: article-json/elife-00036-v1.xml.json
VOR valid in	 640ms: article-json/elife-00013-v1.xml.json

articles:10, failures:0, workers:12, wall-time:680ms, cpu-time:4s, average:457ms

real	0m0.758s
user	0m4.969s
sys	0m0.181s

```

## Licence

Copyright Â© 2023 eLife Sciences

Distributed under the GNU Affero General Public Licence, version 3.
